<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colorado Outdoor Recreation Flow Forecast & Safety</title>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-kml@latest/L.KML.js"></script>
    <script src="https://unpkg.com/leaflet-omnivore@0.3.4/leaflet-omnivore.min.js"></script>
    <link rel="stylesheet" href="app.css">
    <script src="app.js" defer></script>

</head>
<body>

    <header>
        Colorado River Flow Forecast & Safety
    </header>

    <div id="description">
        <p>
            This web application provides real-time and forecasted river flow data for outdoor recreation and safety in Colorado.
            Users can check rivers to assess rafting, fishing, and flood risks in Colorado. Click on a river 
            point to see forecasted flow rates and warnings based on safety thresholds. The data is retrieved from the U.S. National Water Model (NWM) and displayed on an interactive Leaflet map with KML overlays. Users can select rivers to view flow forecasts and safety warnings based on predefined thresholds.

        </p>
    </div>

    <h1>Getting Started</h1>
    <p>To use this application, follow these steps:</p>
        
    <p>
        1. Select the range of the forcast you need for your next outting from the dropdown menu. 
            <ul>
                Short Range: 18 hours
                <br>
                Medium Range: 10 days
                <br>
                Long Range: 30 days
            </ul>
        </li>
        2. Check the layer box for the River you would like to zoom to and load.
        <br>
        3. Click on the river on the map and your information should load in the charts below.
        <br>
        4. If an error occurs try clicking the river again or reloading the page.
        <br>
        5. View the forecasted streamflow data and safety status on the map.
        <br>
        6. Have fun and be safe on your next outdoor adventure!
    </p>
    <div class="container">

        <h2>Select Forecast Range:</h2>
        <br>
        <label for="reachIdInput" style="display: none;">Enter Reach ID:</label>
        <input type="text" id="reachIdInput" placeholder="Enter Reach ID" style="display: none;">
        <label for="forecastTypeSelect">Select Forecast Type:</label>
        <select id="forecastTypeSelect">
            <option value="short_range">Short Range</option>
            <option value="medium_range">Medium Range</option>
            <option value="long_range">Long Range</option>
        </select>
        <div id="forecast-container" style="display: none;">
            <h2>Forecast Data</h2>
            <table id="timeseries-datatable">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Streamflow</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <canvas id="streamflowChart"></canvas>
        </div>

        <br>   
<h2>Zoom To Major Rivers in Colorado</h2>

    <!-- Map Section -->
    <div id="map-container-extra">
        <div id="map"></div>
        <div id="layer-controls">
            <h2>Layers</h2>
        </div>

    <!-- Flow Level Legend -->
    <div id="legend">
        <div class="legend-item"><span class="legend-box" style="background:#4CAF50;"></span> Safe (0-600 CFS)</div>
        <div class="legend-item"><span class="legend-box" style="background:#FF9800;"></span> Caution (600-1400 CFS)</div>
        <div class="legend-item"><span class="legend-box" style="background:#F44336;"></span> Danger (>1400 CFS)</div>
    </div>

    <!-- Status Display -->
    <div id="status-card" class="safe">
        ✅ Select a river point for safety status.
    </div>

    <!-- Chart Container -->
    <div id="chart-container">
        <canvas id="flowChart"></canvas>
    </div>


    <!-- About me section -->
    <div id="about-me">
        <h2>About Me</h2>
        <p> This page was created by Ian Mathews, a graduate student at BYU pursuing a master’s degree in Civil Engineering with a focus on water resource engineering. My life has included experiences as a firefighter, night-club bouncer, and medical team member for downhill mountain bike tours. These diverse roles have shaped my passion for learning and experiencing new adventures.
            This web application is a culmination of my interests in water resources, outdoor recreation, and technology. It aims to provide valuable information for outdoor enthusiasts and promote safety in Colorado's rivers. I hope you find it useful and informative.

        </p>

        <!-- Additional Links -->
        <p> For More information on the NWM and how this application works or how to build your own, please see the links and references below</p>

        <div class="morelinks">
            <a href="https://water.noaa.gov/" target="_blank">NWM Dashboard</a>
            <a href="https://imathews-238.github.io/forecast/documentation.html" target="_blank">Page Documentation</a>

    </main>

    <footer>
        <p>&copy; 2025 Ian Mathews. All rights reserved.</p>
    </footer>

     
</body>
</html>
